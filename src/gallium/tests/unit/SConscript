Import('*')

env = env.Clone()

env.Prepend(LIBS = [gallium])

progs = [
    'pipe_barrier_test',
    'u_cache_test',
    'u_format_test',
    'u_half_test'
]

for prog in progs:
    prog = env.Program(
        target = prog,
        source = prog + '.c',
    )
    
    env.InstallProgram(prog)

    # http://www.scons.org/wiki/UnitTests
    test_alias = env.Alias('unit', [prog], prog[0].abspath)
    AlwaysBuild(test_alias)

